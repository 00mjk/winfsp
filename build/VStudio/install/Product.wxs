<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*" Name="WinFsp" Language="1033" Version="0.9.0" Manufacturer="Navimatics Corporation" UpgradeCode="82f812d9-4083-4ef1-8bc8-0f1eda05b46b">
        <Package InstallerVersion="200" Compressed="yes" InstallScope="perUser" InstallPrivileges="elevated" />
        <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
        <Media Id="1" Cabinet="WinFsp.cab" EmbedCab="yes" />
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
                <Directory Id="INSTALLDIR" Name="WinFsp">
                    <Directory Id="BINDIR" Name="bin" />
                    <Directory Id="INCDIR" Name="inc" />
                    <Directory Id="LIBDIR" Name="lib" />
                </Directory>
            </Directory>
        </Directory>
        <DirectoryRef Id="BINDIR" FileSource="..\build\Release">
            <Component Id="C.winfsp-x64.sys">
                <File Source="winfsp-x64.sys" KeyPath="yes" />
            </Component>
            <Component Id="C.winfsp-x86.sys">
                <File Source="winfsp-x86.sys" KeyPath="yes" />
            </Component>
            <Component Id="C.winfsp-x64.dll">
                <File Source="winfsp-x64.dll" KeyPath="yes" />
            </Component>
            <Component Id="C.winfsp-x86.dll">
                <File Source="winfsp-x86.dll" KeyPath="yes" />
            </Component>
        </DirectoryRef>
        <DirectoryRef Id="INCDIR" FileSource="..\..\inc">
            <Component Id="C.fsctl.h" Directory="winfsp">
                <File Source="fsctl.h" KeyPath="yes" />
            </Component>
            <Component Id="C.winfsp.h" Directory="winfsp">
                <File Source="winfsp.h" KeyPath="yes" />
            </Component>
        </DirectoryRef>
        <DirectoryRef Id="LIBDIR" FileSource="..\..\Release">
            <Component Id="C.fsctl.h" Directory="winfsp">
                <File Source="fsctl.h" KeyPath="yes" />
            </Component>
            <Component Id="C.winfsp.h" Directory="winfsp">
                <File Source="winfsp.h" KeyPath="yes" />
            </Component>
        </DirectoryRef>
        <ComponentGroup Id="C.WinFsp.bin">
            <ComponentRef Id="C.winfsp-x64.sys" />
            <ComponentRef Id="C.winfsp-x86.sys" />
            <ComponentRef Id="C.winfsp-x64.dll" />
            <ComponentRef Id="C.winfsp-x86.dll" />
        </ComponentGroup>
        <ComponentGroup Id="C.WinFsp.inc">
            <ComponentRef Id="C.fsctl.h" />
            <ComponentRef Id="C.winfsp.h" />
        </ComponentGroup>
        <ComponentGroup Id="C.WinFsp.lib">
            <ComponentRef Id="C.winfsp-x64.lib" />
            <ComponentRef Id="C.winfsp-x86.lib" />
        </ComponentGroup>
        <Feature Id="F.User" Level="1" Title="User">
            <ComponentGroupRef Id="C.WinFsp.bin" />
        </Feature>
        <Feature Id="F.Developer" Level="1" Title="Developer">
            <ComponentGroupRef Id="C.WinFsp.bin" />
            <ComponentGroupRef Id="C.WinFsp.inc" />
            <ComponentGroupRef Id="C.WinFsp.lib" />
        </Feature>
        <UI />
    </Product>
</Wix>